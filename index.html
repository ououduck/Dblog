<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dçš„æ—¥è®°</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>

<body>

<!--é¡¶éƒ¨å…¬å‘Šæ -->
<div class="ä¸éœ€è¦">
    <marquee behavior="scroll" direction="left">
        æ­¤ç½‘ç«™è¿˜å¤„äºbetaé˜¶æ®µ æ­£åœ¨åŠªåŠ›å¼€å‘ä¸­â€¦â€¦ å¾…åˆ°æ•´ä¸ªé¡¹ç›®ç¨³å®šåæˆ‘ä»¬ä¼šå°†å…¶å¼€æº
    </marquee>
</div>

    <header>
        <h1>Dçš„æ—¥è®°</h1>
        <h2>Då·¥ä½œå®¤çš„ä¸»ç«™ç‚¹</h2>
<nav>
    <ul>
        <li><a href="/index.html" onclick="router(event)">ğŸ“ é¦–é¡µ</a></li>
        <li><a href="/subsites.html" onclick="router(event)">ğŸŒ æ——ä¸‹ç«™ç‚¹</a></li>
        <li><a href="/link.html" onclick="router(event)">ğŸ”— å‹é“¾</a></li>
        <li><a href="/contact.html" onclick="router(event)">ğŸ“® è”ç³»</a></li>
        <li><a href="/about.html" onclick="router(event)">â„¹ï¸ å…³äº</a></li>
    </ul>
</nav>
    </header>

    <main>
        <section>
            <select id="category-filter" onchange="filterPosts()">
                <option value="">æ‰€æœ‰åˆ†ç±»</option>
                <option value="æ—¥è®°">æ—¥è®°</option>
                <option value="æ•™ç¨‹">æ•™ç¨‹</option>
                <option value="åˆ†äº«">åˆ†äº«</option>
            </select>
        </section>
        <section class="post-list">
            <h2>-----Posts-----</h2>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Då·¥ä½œå®¤&duck. All rights reserved.</p>
        <p><a href="https://beian.miit.gov.cn" target="_blank">æ¹˜ICPå¤‡2025101669å·-1</a></p>
    </footer>

    <script>
        async function loadPosts() {
            try {
                const response = await fetch("posts.json");
                if (!response.ok) {
                    throw new Error("Failed to fetch posts");
                }
                const posts = await response.json();
                window.posts = posts;

                const postList = document.querySelector(".post-list");
                postList.innerHTML = "<h2>-----Posts-----</h2>";

                posts.forEach(post => {
                    const postElement = document.createElement("article");
                    postElement.className = "post";
                    postElement.innerHTML = `
                        <h3><a href="${post.url}"onclick="router(event)">${post.title}</a></h3>
                        <p>åˆ†ç±»: ${post.category}</p>
                        <p>æ—¶é—´: ${post.time}</p>
                        <p>${post.content}</p>
                    `;
                    postList.appendChild(postElement);
                });
            } catch (error) {
                console.error("Error loading posts:", error);
                const postList = document.querySelector(".post-list");
                postList.innerHTML = "<p>åŠ è½½æ–‡ç« åˆ—è¡¨æ—¶å‘ç”Ÿé”™è¯¯</p>";
            }
        }

        function filterPosts() {
            const selectedCategory = document.getElementById("category-filter").value;
            const postList = document.querySelector(".post-list");
            postList.innerHTML = "<h2>-----Posts-----</h2>";

            window.posts.forEach(post => {
                if (!selectedCategory || post.category === selectedCategory) {
                    const postElement = document.createElement("article");
                    postElement.className = "post";
                    postElement.innerHTML = `
                        <h3><a href="${post.url}"onclick="router(event)">${post.title}</a></h3>
                        <p>åˆ†ç±»: ${post.category}</p>
                        <p>æ—¶é—´: ${post.time}</p>
                        <p>${post.content}</p>
                    `;
                    postList.appendChild(postElement);
                }
            });
        }

        document.addEventListener("DOMContentLoaded", () => {
            document.body.classList.add("loaded");
            loadPosts();
        });
      
         async function router(event) {
           event.preventDefault();
           const url = event.target.href;
           const response = await fetch(url);
           const html = await response.text();
           const parser = new DOMParser();
           const doc = parser.parseFromString(html, 'text/html');
           const newContent = doc.querySelector('main').innerHTML;
           document.querySelector('main').innerHTML = newContent;
           window.history.pushState({}, '', url);

         // é‡æ–°åŠ è½½æ–‡ç« åˆ—è¡¨
         loadPosts();
        }


       window.addEventListener('popstate', async () => {
       const response = await fetch(window.location.href);
       const html = await response.text();
       const parser = new DOMParser();
       const doc = parser.parseFromString(html, 'text/html');
       document.querySelector('main').innerHTML = doc.querySelector('main').innerHTML;
       loadMusicPlayer();
            });

       function loadMusicPlayer() {
    // å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ¢å¤éŸ³ä¹æ’­æ”¾å™¨çš„çŠ¶æ€
    // ä¾‹å¦‚ï¼Œä» sessionStorage æˆ– localStorage ä¸­è¯»å–æ’­æ”¾è¿›åº¦
       }

    </script>

    <!-- å¼•å…¥å°æ«æ’­æ”¾å™¨ -->
    <script src="/xf-MusicPlayer/js/xf-MusicPlayer.min.js"></script>          
     <!-- é…ç½®å°æ«æ’­æ”¾å™¨ -->
<!--  è¿™æ˜¯æœ¬åœ°ç‰ˆ <div id="xf-MusicPlayer"  data-localMusic="playData.json"></div>-->
<!--<div id="xf-MusicPlayer"  data-songList="26467411"></div>æ­Œå•ç‰ˆ-->
<div id="xf-MusicPlayer"  data-songChart="çƒ­æ­Œæ¦œ" data-fadeOutAutoplay data-themeColor="xf-sky"></div><!--æ¦œå•ç‰ˆ-->

</body>
</html>